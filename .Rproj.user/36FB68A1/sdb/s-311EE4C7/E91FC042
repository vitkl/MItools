{
    "collab_server" : "",
    "contents" : "##' \\code{cleanMITAB} extracts and cleans a set of columns of MITAB2.7\n##' @description function called internally by \\code{\\link{cleanMITAB}} if the format is MITAB2.7\n##' @param mitab data.table containing molecular interaction data in MITAB 2.7 format\n##' @author Vitalii Kleshchevnikov\n##' @import data.table\ncleanMITAB27 = function(mitab){\n  # changing column names to data.table-compatible format\n  {\n    colnames(mitab) = gsub(\" \",\"_\",colnames(mitab))\n    colnames(mitab) = gsub(\"\\\\(|\\\\)\",\"\",colnames(mitab))\n    colnames(mitab) = gsub(\"#\",\"\",colnames(mitab))\n  }\n  # cleaning Taxid \"taxid:9606(human)|taxid:9606(Homo sapiens)\" to 9606\n  {\n    mitab[, Taxid_interactor_A := gsub(\"taxid:|\\\\(.*$\",\"\",Taxid_interactor_A)]\n    mitab[, Taxid_interactor_B := gsub(\"taxid:|\\\\(.*$\",\"\",Taxid_interactor_B)]\n    mitab[, Host_organisms := gsub(\"taxid:|\\\\(.*$\",\"\",Host_organisms)]\n    # saving identifier types and cleaning interactor ids\n    mitab[, interactor_IDs_databases_A := gsub(\":.*$\",\"\",IDs_interactor_A)]\n    mitab[, interactor_IDs_databases_B := gsub(\":.*$\",\"\",IDs_interactor_B)]\n    mitab[, IDs_interactor_A := gsub(\"^.*:\",\"\",IDs_interactor_A)]\n    mitab[, IDs_interactor_B := gsub(\"^.*:\",\"\",IDs_interactor_B)]\n    # isoform \"-1\" is a canonical sequence, IntAct uses isoform \"-1\" when it's clear that the isoform is \"-1\" and a canonical identifier if it's not clear which isoform was used in the experiment. Removing isoform sign \"-1\":\n    mitab[, IDs_interactor_A := gsub(\"-1$\", \"\", IDs_interactor_A)]\n    mitab[, IDs_interactor_B := gsub(\"-1$\", \"\", IDs_interactor_B)]\n    # cleaning other information\n    mitab[, bait_prey_status_A := gsub(\"^.*\\\\(|\\\\)\",\"\",Experimental_roles_interactor_A)]\n    mitab[, bait_prey_status_B := gsub(\"^.*\\\\(|\\\\)\",\"\",Experimental_roles_interactor_B)]\n    mitab[, Publication_Identifiers := gsub(\"^.*pubmed:|\\\\|.*$\",\"\",Publication_Identifiers)]\n    mitab[, Confidence_values := gsub(\"^intact-miscore:\",\"\",Confidence_values)]\n    mitab[, Confidence_values := gsub(\"-\",\"NA\",Confidence_values)]\n    # supress expected warning (NA introduced by coersion to numeric) to avoid confusion\n    suppressWarnings({mitab[, Confidence_values := as.numeric(Confidence_values)]})\n    #mitab[, Interaction_identifiers := unlist(gsubfn::strapplyc(Interaction_identifiers,\"EBI-[[:digit:]]+\",simplify = T)), by =Interaction_identifiers]\n    # generating unique identifier for interacting pairs\n    mitab[, pair_id := apply(data.table(IDs_interactor_A,IDs_interactor_B,stringsAsFactors = F), 1,\n                             function(a) { z = sort(a)\n                             paste0(z[1],\"|\",z[2]) })]\n  }\n  {\n    # extract region sufficient to interact or mutation affecting interaction information from Features_interactor_A and Features_interactor_B\n    # start by keeping only relevant columns\n    mitab = unique(mitab[, .(pair_id,\n                             IDs_interactor_A, IDs_interactor_B,\n                             interactor_IDs_databases_A, interactor_IDs_databases_B,\n                             Taxid_interactor_A, Taxid_interactor_B,\n                             Publication_Identifiers, Confidence_values,\n                             Host_organisms,\n                             bait_prey_status_A, bait_prey_status_B,\n                             Interaction_detection_methods, Interaction_types, Interaction_identifiers, Expansion_methods,\n                             Features_interactor_A, Features_interactor_B,\n                             Identification_method_participant_A, Identification_method_participant_B)])\n    mitab = MITABregionFeature(mitab)\n  }\n}\n",
    "created" : 1500397943986.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2789754350",
    "id" : "E91FC042",
    "lastKnownWriteTime" : 1500398191,
    "last_content_update" : 1500398191352,
    "path" : "~/Desktop/vitalii/viral_project/MItools/R/cleanMITAB27.R",
    "project_path" : "R/cleanMITAB27.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 18,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}